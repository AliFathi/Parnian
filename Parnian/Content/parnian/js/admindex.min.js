function GroupAction(n){"use strict";function u(n){$(n).each(function(n,t){$(t).html(n+1)})}function f(){function f(n,t){this.i=n;this.p=t}var i=[],n,u;$(".handle").each(function(n,t){var r=eval($(t).attr("data-id")),u=n+1,e=new f(r,u);i.push(e)});n=new FormData;u=JSON.stringify(i);n.append("jsonArray",u);r("post","/"+t.controller+"/"+t.sortAction,n)}function i(n,i,u){var f=e(n);f.length!==0?bootbox.confirm(i+" "+f.length+" "+t.entityName+"؟",function(n){if(n){var t=new FormData,i=JSON.stringify(f);t.append("jsonArray",i);r("post",u,t)}}):bootbox.alert("چیزی انتخاب نشده!")}function r(n,t,i){$.ajax({type:n,url:t,data:i,cache:!1,contentType:!1,processData:!1,success:function(n){bootbox.alert(n,function(){window.location.reload()})}});bootbox.dialog({title:"شکیبا باشید!",message:"لطفا کمی صبر کنید..."})}function e(n){var i=[];return $(n).each(function(n,r){if($(r).is(":checked")){var u=t.idType==="int"?parseInt($(this).attr("data-id")):t.idType==="string"?$(this).attr("data-id"):bootbox.alert("نوع شناسه را مشخص کنید.");i.push(u)}}),i}var t=$.extend({},{idType:"int",controller:"",entityName:"آیتم",sorting:!0,deleting:!0,hiding:!0,sortAction:"SetPriority",deleteAction:"GroupDelete",hideAction:"GroupdoNotShow"},n);$(".group-action").prop("checked",!1);$("input#select-all").prop("checked",!1);$("#select-all").click(function(){$(this).is(":checked")?$(".group-action").prop("checked",!0):$(".group-action").prop("checked",!1)});t.sorting&&($("tbody").sortable({placeholder:"ui-state-highlight",handle:$(".handle"),update:function(){u(".handle");$("#set-priority").addClass("flasher")}}),$("#set-priority").click(function(){f()}));t.deleting&&$("#group-delete").click(function(){i(".group-action","حذف","/"+t.controller+"/"+t.deleteAction)});t.hiding&&$("#group-do-not-show").click(function(){i(".group-action","پنهان کردن","/"+t.controller+"/"+t.hideAction)})}